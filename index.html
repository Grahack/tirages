<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Visualisation de tirages</title>
    <meta name="description"
          content="Visualisation d’issues d’une expérience aléatoire" />
    <meta name="keywords" content="visualisation,aléatoire,collège,lycée" />
    <link href="style.css" rel="stylesheet"/>
</head>
<body>
<noscript>
    <div style="color:#CC0000; text-align:center">
    Besoin de Javascript pour utiliser cet outil.
    </div>
</noscript>
<div id="tirages">
    <h1>Tirages</h1>
    <div id="issues">
        <div class="issue">
            <input id="issue1" type="text"></input>
            <input id="nb-issue1" type="text"></input>
        </div>
        <div class="issue">
            <input id="issue2" type="text"></input>
            <input id="nb-issue2" type="text"></input>
        </div>
        <div class="issue">
            <input id="issue3" type="text"></input>
            <input id="nb-issue3" type="text"></input>
        </div>
    </div>
    <input id="add" value="+" type="button" onclick="add()"></input>
    <input id="del" value="-" type="button" onclick="del()"></input>
    <input id="ok"  value="générer" type="button" onclick="gen()"></input>
</div>
<script>
function add() {
    alert("Pas encore fonctionnel… Désolé.");
}
function del() {
    alert("Pas encore fonctionnel… Désolé.");
}
function gen() {
    var issues = [];
    var idx = 1;
    do {
        var url = '';
        var urlElt = document.getElementById('issue'+idx);
        if (urlElt) {
            url = urlElt.value;
            if (url) {
                var numElt = document.getElementById('nb-issue'+idx);
                issues.push({url:url, num:parseInt(0 + numElt.value)});
            }
        }
        idx++;
    }
    while (url)
    if (issues.length) {
        document.getElementById('tirages').innerHTML = '';
        issues.forEach(function (elt) {
            var img = '<img src="' + elt.url + '" />';
            for (i=0; i<elt.num; i++) {
                document.write(img);
            }
        });
    } else {
        alert("Veuillez remplir au moins les deux premières lignes !");
    }
}
</script>
</body>
</html>

